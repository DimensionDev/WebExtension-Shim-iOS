{"version":3,"sources":["../webpack/bootstrap","extension/injected-script/addEventListener.ts","utils/constants.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","store","isEnabled","getEvent","x","mocks","mockTable","assign","target","document","activeElement","srcElement","currentTarget","_inherits_from_prototype","Proxy","hacks","[object Object]","text","transfer","DataTransfer","setData","ClipboardEvent","clipboardData","defaultPrevented","proto","constructor","getOwnPropertyDescriptor","set","window","InputEvent","inputType","data","keys","concat","forEach","Set","invokeCustomEvent","e","ev","eventName","param","detail","f","hack","console","error","addEventListener","constants","apply","thisRef","event","callback","args","add","Reflect","removeEventListener","delete","__webpack_exports__","CustomEventId"],"mappings":"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","file":"js/injectedscript.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 337);\n","import { CustomEventId } from '../../utils/constants';\n{\n    const store = {};\n    function hijack(key) {\n        store[key] = new Set();\n    }\n    function isEnabled(key) {\n        return key in store;\n    }\n    function getEvent(x, mocks = {}) {\n        const mockTable = Object.assign({ target: document.activeElement, srcElement: document.activeElement, \n            // Since it is bubbled to the document.\n            currentTarget: document, \n            // ! Why?\n            _inherits_from_prototype: true }, mocks);\n        return new Proxy(x, {\n            get(target, key) {\n                return mockTable[key] || target[key];\n            },\n        });\n    }\n    const hacks = {\n        paste(text) {\n            const transfer = new DataTransfer();\n            transfer.setData('text/plain', text);\n            const e = new ClipboardEvent('paste', { clipboardData: transfer });\n            // ! Why?\n            return getEvent(e, { defaultPrevented: false, preventDefault() { } });\n        },\n        input(text) {\n            // Cause react hooks the input.value getter & setter\n            const proto = document.activeElement.constructor.prototype;\n            Object.getOwnPropertyDescriptor(proto, 'value').set.call(document.activeElement, text);\n            return getEvent(new window.InputEvent('input', { inputType: 'insertText', data: text }));\n        },\n    };\n    Object.keys(hacks).concat(['keyup', 'input']).forEach(hijack);\n    const invokeCustomEvent = e => {\n        const ev = e;\n        const [eventName, param] = ev.detail;\n        for (const f of store[eventName] || []) {\n            try {\n                const hack = hacks[eventName];\n                if (hack)\n                    f(hack(...param));\n                else\n                    f(param);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        }\n    };\n    document.addEventListener(CustomEventId, invokeCustomEvent);\n    document.addEventListener = new Proxy(document.addEventListener, {\n        apply(target, thisRef, [event, callback, ...args]) {\n            if (isEnabled(event))\n                store[event].add(callback);\n            return Reflect.apply(target, thisRef, [event, callback, ...args]);\n        },\n    });\n    document.removeEventListener = new Proxy(document.removeEventListener, {\n        apply(target, thisRef, [event, callback, ...args]) {\n            if (isEnabled(event))\n                store[event].delete(callback);\n            return Reflect.apply(target, thisRef, [event, callback, ...args]);\n        },\n    });\n}\n","/** Just a random one. Never mind. */\nexport const CustomEventId = '6fea93e2-1ce4-442f-b2f9-abaf4ff0ce64';\n"],"sourceRoot":""}